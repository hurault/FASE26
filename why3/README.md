## Directory content
- `encoding-ok.mlw`: a Why3 file containing the proofs.
- `encoding-ok/`: a directory generated by Why3 that keeps traces of the performed proofs, in particular the Coq proofs.
- `Dockerfile`: used to build the Docker image and listing the dependencies.

## Dependencies
Why3, Coq, CVC5, Z3, and Alt-Ergo.  
For version numbers, please refer to the `Dockerfile`.

## Installation with opam (Docker is also available)
1. Install opam (https://opam.ocaml.org/)
2. Create an OCaml switch
`opam switch create 5.3.0`
3. Install Why3, Coq, CVC5, Z3, and Alt-Ergo.
- `opam install why3.1.8.1 why3-ide.1.8.1 z3.4.15.2 alt-ergo.2.6.2 coq.8.20.1 why3-coq.1.8.1`
- `sudo apt install cvc5`
5. Finalize the installation
- `why3 config detect`

## Smoke test
`why3 config detect` must display at least
- Found prover Alt-Ergo version 2.6.2, OK.
- Found prover CVC5 version 1.1.2, OK.
- Found prover Coq version 8.20.1, OK.
- There may be warnings about Z3, but they do not cause any issues for what follows.

## Replaying the proofs
### Command line
`why3 replay encoding-ok` will replay the proof.

### Why3 IDE
`why3 ide encoding-ok.mlw` will launch the Why3 IDE with all proofs completed.

1. **Forget the proofs**  
   `Tool → Mark obsolete`

2. **Replay all proofs**  
   `Tool → Replay valid obsolete proofs`
   
## Docker
A docker is available here : https://cloud.irit.fr/s/oXYNl0dxqZZpcb4

Load the docker with `docker load -i fase_why3.tar`

Run the docker with `docker run --rm -it fase_why3 bash`

You will then be able to run the `why3 replay encoding-ok` to replay the proof. 
If the replay is OK, you will see : `96/96 (replay OK)`

Using the Why3 IDE can be more difficult due to issues with the connection between the graphical server and Docker. If you don’t have any graphical display issues, you can replay the proofs as described in the section "Replaying the proofs".
